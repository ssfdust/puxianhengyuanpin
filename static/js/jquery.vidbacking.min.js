!function(e){e.fn.vidbacking=function(t){var o=e.extend({"video-opacity":"1",masked:!1,"mask-opacity":"1","youtube-mute-video":!0,"youtube-loop":!0},t);return this.each(function(){var t=e(this),i=t.prop("tagName");t.prop("id");if("BODY"==i){if(obj=e(".vidbacking"),objtag=obj.prop("tagName"),"IFRAME"==objtag){var s=obj.attr("src")+"?autoplay=1&rel=0&controls=0&showinfo=0",c=(p=obj.attr("src").split("/"))[p.length-1];1==o["youtube-mute-video"]&&(s+="&mute=1"),1==o["youtube-loop"]&&(s+="&loop=1&playlist="+c),obj.attr("src",s),obj.addClass("vidbacking-active-body-back-youtube");var h=e(window).height(),d=e(window).width(),b=(obj.height(),obj.width(),d/h),a=h/d;d>h?b<1.77?(expected_width=h*(16/9),obj.css("width",expected_width+"px"),obj.css("height","100%")):(expected_height=d/(16/9),obj.css("width","100%"),obj.css("height",expected_height+"px")):a<.56?(expected_height=d/(16/9),obj.css("width","100%"),obj.css("height",expected_height+"px")):(expected_width=h*(16/9),obj.css("width",expected_width+"px"),obj.css("height","100%"))}else poster=obj.attr("poster"),obj.css("background-size","100% 100% !important"),obj.css("background-image","url("+poster+")"),obj.addClass("vidbacking-active-body-back"),obj.css("opacity",o["video-opacity"]);obj.removeClass("vidbacking"),1==o.masked&&(obj.after('<div class="vidmask-body-back">&nbsp;</div>'),e(".vidmask-body-back").css("opacity",o["mask-opacity"])),e(window).resize(function(){var t=e(window).height(),o=e(window).width(),i=obj.height(),s=obj.width(),c=t/o;"IFRAME"==objtag?o>t?o/t<1.77?(expected_width=t*(16/9),obj.css("width",expected_width+"px"),obj.css("height","100%")):(expected_height=o/(16/9),obj.css("width","100%"),obj.css("height",expected_height+"px")):c<.56?(expected_height=o/(16/9),obj.css("width","100%"),obj.css("height",expected_height+"px")):(expected_width=t*(16/9),obj.css("width",expected_width+"px"),obj.css("height","100%")):(i<t&&obj.css("height",t),s<o&&obj.css("width",o))})}else{if(obj=e(this).find(".vidbacking"),objtag=obj.prop("tagName"),"IFRAME"==objtag){var p;s=obj.attr("src")+"?autoplay=1&rel=0&controls=0&showinfo=0",c=(p=obj.attr("src").split("/"))[p.length-1];1==o["youtube-mute-video"]&&(s+="&mute=1"),1==o["youtube-loop"]&&(s+="&loop=1&playlist="+c),obj.attr("src",s),obj.addClass("vidbacking-active-block-back-youtube"),t.css("position","relative"),t.css("overflow","hidden");h=t.outerHeight(),d=t.width(),obj.height(),obj.width(),b=d/h,a=h/d;d>h?b<1.77?(expected_width=h*(16/9),obj.css("width",expected_width+"px"),obj.css("height","100%")):(expected_height=d/(16/9),obj.css("width","100%"),obj.css("height",expected_height+"px")):a<.56?(expected_height=d/(16/9),obj.css("width","100%"),obj.css("height",expected_height+"px")):(expected_width=h*(16/9),obj.css("width",expected_width+"px"),obj.css("height","100%"))}else poster=obj.attr("poster"),t.css("position","relative"),t.css("overflow","hidden"),obj.css("background-image","url("+poster+")"),obj.addClass("vidbacking-active-block-back"),obj.css("opacity",o["video-opacity"]);obj.removeClass("vidbacking"),1==o.masked&&(t.append('<div class="vidmask-block-back">&nbsp;</div>'),t.find(".vidmask-block-back").css("opacity",o["mask-opacity"])),e(window).resize(function(){var e=t.outerHeight(),o=t.width(),i=obj.height(),s=obj.width(),c=e/o;"IFRAME"==objtag?o>e?o/e<1.77?(expected_width=e*(16/9),obj.css("width",expected_width+"px"),obj.css("height","100%")):(expected_height=o/(16/9),obj.css("width","100%"),obj.css("height",expected_height+"px")):c<.56?(expected_height=o/(16/9),obj.css("width","100%"),obj.css("height",expected_height+"px")):(expected_width=e*(16/9),obj.css("width",expected_width+"px"),obj.css("height","100%")):(i<e&&obj.css("height",e),s<o&&obj.css("width",o))}),e(window).scroll(function(){var o=e(window).scrollTop(),i=(e(window).scrollLeft(),e(window).height()),s=t.offset(),c=i+o;if(t.outerHeight()+s.top<o||s.top>c){if(!obj[0].paused)try{obj[0].pause()}catch(e){console.error(e)}}else if(obj[0].paused)try{obj[0].play()}catch(e){console.error(e)}})}})}}(jQuery);
